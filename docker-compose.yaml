services:
  website:
    image: ghcr.io/abstractumbra/terrible-website:latest
    container_name: "website"
    restart: "unless-stopped"
    volumes:
      - ./static:/app/static:ro
      - ./templates:/app/templates:ro
      - ./resources:/app/resources:ro
    environment:
      CONFIG_PATH: /app_config
      CSRF_SECRET_FILE: /run/secrets/csrf
    ports:
      - 8030:8030
    secrets:
      - csrf
    configs:
      - app_config

configs:
  app_config:
    file: configs/app.json
secrets:
  csrf:
    file: secrets/csrf
